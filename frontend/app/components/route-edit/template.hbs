<form>
  {{#if unlocked}}
    <div class="form-group">
      {{textarea class="form-control" value=topic placeholder="Enter a topic"}}
    </div>
    <div class="form-check">
      {{input id="public" class="form-check-input" type="checkbox" checked=public}}
      <label class="form-check-label" for="public">Public?</label>
    </div>
    <br>
    {{#if admin}}
      <div class="form-check">
        {{input id="allow-editing" class="form-check-input" type="checkbox" checked=allowEditing}}
        <label class="form-check-label" for="allow-editing">Allow editing?</label>
      </div>
    {{/if}}
    <br>
    {{#liquid-if allowEditing}}
      <div class="form-group">
        {{input class="form-control" type="password" value=editPassword placeholder="Enter an edit password (leave blank to keep unchanged)"}}
      </div>
    {{/liquid-if}}
    {{#if (or options newOptions)}}
      <h2>Options</h2>
      {{#each options as |option index|}}
        <div class="form-group">
          {{input class="form-control" type="text" value=option.name placeholder="Enter an option"}}
          <br>
          {{#if admin}}
            {{input class="form-control" type="number" value=option.votes placeholder="Enter the desired number of votes"}}
            <br>
          {{/if}}
          <button class="btn btn-danger" {{action "removeOption" "options" index}}>Delete</button>
        </div>
      {{/each}}
      {{#each newOptions as |option index|}}
        <div class="form-group">
          {{input class="form-control" type="text" value=option.name placeholder="Enter an option"}}
          <br>
          <button class="btn btn-danger" {{action "removeOption" "newOptions" index}}>Delete</button>
        </div>
      {{/each}}
    {{/if}}
    <br>
    <button class="btn btn-primary" {{action "addOption"}}>+ Add Option</button>
    <br><br>
    {{#spin-button class="btn btn-success btn-block btn-lg" buttonStyle="zoom-out" action=(action "savePoll") disabled=disabled}}Save{{/spin-button}}
    {{#spin-button class="btn btn-danger btn-block btn-lg" buttonStyle="zoom-out" action=(action "deletePoll") disabled=socket.disconnected}}Delete Poll{{/spin-button}}
    <br>
  {{else}}
    {{input class="form-control" type="password" value=password placeholder="Enter the edit password"}}
    <br>
    <p class="text-danger">{{error}}</p>
    {{#spin-button class="btn btn-primary btn-block btn-lg" buttonStyle="zoom-out" action=(action "submitPassword") disabled=(or (not password) socket.disconnected)}}Submit{{/spin-button}}
    <br>
    <h5>{{#link-to "view" poll_id class="text-dark"}}View Poll{{/link-to}}</h5>
  {{/if}}
</form>
